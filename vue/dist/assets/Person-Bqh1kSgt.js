/* empty css             *//* empty css                  *//* empty css               *//* empty css               *//* empty css                  *//* empty css              *//* empty css                 */import{r as h}from"./request-BFhekgCV.js";/* empty css                */import{z as k,r as w,c as p,b as t,w as a,P as B,o as n,a as i,i as F,u as N,Q as S,h as C,E as c,m as I,O,C as q,N as J,R as P,S as z,B as D}from"./index-DehrrkGI.js";const M={style:{width:"40%",margin:"5px auto",background:"linear-gradient(to bottom right, white, #CCE2FD)","border-radius":"10px"},class:"card"},Q={style:{"text-align":"center","margin-bottom":"20px"}},R=["src"],T={style:{"text-align":"center"}},ee={__name:"Person",emits:["updateUser"],setup($,{emit:_}){const g="http://192.168.88.6:8090/api",d=k(null),e=w({user:JSON.parse(localStorage.getItem("xm-user")||"{}"),rules:{contact:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^\d{11}$/,message:"联系电话必须是11位数字",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]}}),f=s=>{e.user.avatar=s.data},b=_,V=()=>{d.value.validate(s=>{s&&h.put("/user/update",e.user).then(l=>{l.code==="200"?(c.success("保存成功"),localStorage.setItem("xm-user",JSON.stringify(e.user)),b("updateUser")):c.error(l.msg)})})};return(s,l)=>{const v=I,x=O,u=q,r=J,m=P,E=z,y=D,U=B;return n(),p("div",M,[t(U,{ref_key:"userForm",ref:d,model:e.user,rules:e.rules,"label-width":"60px",style:{padding:"20px"}},{default:a(()=>[i("div",Q,[t(x,{action:g+"/files/upload","on-success":f,"show-file-list":!1,class:"avatar-uploader"},{default:a(()=>[e.user.avatar?(n(),p("img",{key:0,src:e.user.avatar,class:"avatar"},null,8,R)):(n(),F(v,{key:1,class:"avatar-uploader-icon"},{default:a(()=>[t(N(S))]),_:1}))]),_:1},8,["action"])]),t(r,{prop:"username",label:"用户名"},{default:a(()=>[t(u,{disabled:"",modelValue:e.user.username,"onUpdate:modelValue":l[0]||(l[0]=o=>e.user.username=o),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),t(r,{prop:"name",label:"姓名"},{default:a(()=>[t(u,{modelValue:e.user.name,"onUpdate:modelValue":l[1]||(l[1]=o=>e.user.name=o),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),t(r,{prop:"gender",label:"性别"},{default:a(()=>[t(E,{modelValue:e.user.gender,"onUpdate:modelValue":l[2]||(l[2]=o=>e.user.gender=o),placeholder:"请选择"},{default:a(()=>[t(m,{label:"男",value:"男"}),t(m,{label:"女",value:"女"})]),_:1},8,["modelValue"])]),_:1}),t(r,{prop:"contact",label:"电话"},{default:a(()=>[t(u,{modelValue:e.user.contact,"onUpdate:modelValue":l[3]||(l[3]=o=>e.user.contact=o),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),t(r,{prop:"email",label:"邮箱"},{default:a(()=>[t(u,{modelValue:e.user.email,"onUpdate:modelValue":l[4]||(l[4]=o=>e.user.email=o),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),i("div",T,[t(y,{type:"primary",onClick:V},{default:a(()=>l[5]||(l[5]=[C("保 存")])),_:1})])]),_:1},8,["model","rules"])])}}};export{ee as default};
