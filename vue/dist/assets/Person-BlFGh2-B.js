/* empty css             *//* empty css                  *//* empty css               *//* empty css               *//* empty css                  *//* empty css              *//* empty css                 */import{r as m}from"./request-BFhekgCV.js";/* empty css                */import{z as N,r as k,c as f,b as l,w as a,P as I,o as u,i,u as h,Q as C,j as g,a as B,h as w,E as o,m as F,O as R,N as D,C as J,R as T,S as q,B as M}from"./index-DehrrkGI.js";const P={style:{width:"50%"},class:"card"},j=["src"],z={style:{"text-align":"center"}},ee={__name:"Person",emits:["updateUser"],setup(A,{emit:V}){const b="http://192.168.88.6:8090api",c=N(null),e=k({user:JSON.parse(localStorage.getItem("xm-user")||"{}"),rules:{contact:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^\d{11}$/,message:"联系电话必须是11位数字",trigger:"blur"}]}}),v=n=>{e.user.avatar=n.data},p=V,y=()=>{c.value.validate(n=>{n&&(e.user.role==="ADMIN"?m.put("/admin/update",e.user).then(t=>{t.code==="200"?(o.success("保存成功"),localStorage.setItem("xm-user",JSON.stringify(e.user)),p("updateUser")):o.error(t.msg)}):e.user.role==="USER"?m.put("/user/update",e.user).then(t=>{t.code==="200"?(o.success("保存成功"),localStorage.setItem("xm-user",JSON.stringify(e.user)),p("updateUser")):o.error(t.msg)}):e.user.role==="DOCTOR"&&m.put("/doctor/update",e.user).then(t=>{t.code==="200"?(o.success("保存成功"),localStorage.setItem("xm-user",JSON.stringify(e.user)),p("updateUser")):o.error(t.msg)}))})};return(n,t)=>{const U=F,x=R,s=D,d=J,_=T,E=q,O=M,S=I;return u(),f("div",P,[l(S,{ref_key:"userForm",ref:c,model:e.user,rules:e.rules,"label-width":"70px",style:{padding:"20px"}},{default:a(()=>[l(s,{prop:"avatar",label:"头像"},{default:a(()=>[l(x,{action:b+"/files/upload","on-success":v,"show-file-list":!1,class:"avatar-uploader"},{default:a(()=>[e.user.avatar?(u(),f("img",{key:0,src:e.user.avatar,class:"avatar"},null,8,j)):(u(),i(U,{key:1,class:"avatar-uploader-icon"},{default:a(()=>[l(h(C))]),_:1}))]),_:1},8,["action"])]),_:1}),l(s,{prop:"username",label:"用户名"},{default:a(()=>[l(d,{disabled:"",modelValue:e.user.username,"onUpdate:modelValue":t[0]||(t[0]=r=>e.user.username=r),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),l(s,{prop:"name",label:"姓名"},{default:a(()=>[l(d,{modelValue:e.user.name,"onUpdate:modelValue":t[1]||(t[1]=r=>e.user.name=r),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),l(s,{prop:"contact",label:"电话"},{default:a(()=>[l(d,{modelValue:e.user.contact,"onUpdate:modelValue":t[2]||(t[2]=r=>e.user.contact=r),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),e.user.role==="DOCTOR"?(u(),i(s,{key:0,prop:"gender",label:"性别"},{default:a(()=>[l(E,{modelValue:e.user.gender,"onUpdate:modelValue":t[3]||(t[3]=r=>e.user.gender=r),placeholder:"请选择"},{default:a(()=>[l(_,{label:"男",value:"男"}),l(_,{label:"女",value:"女"})]),_:1},8,["modelValue"])]),_:1})):g("",!0),e.user.role==="DOCTOR"?(u(),i(s,{key:1,prop:"description",label:"个人背景"},{default:a(()=>[l(d,{type:"textarea",modelValue:e.user.description,"onUpdate:modelValue":t[4]||(t[4]=r=>e.user.description=r),placeholder:"请输入个人背景"},null,8,["modelValue"])]),_:1})):g("",!0),B("div",z,[l(O,{type:"primary",onClick:y},{default:a(()=>t[5]||(t[5]=[w("保 存")])),_:1})])]),_:1},8,["model","rules"])])}}};export{ee as default};
