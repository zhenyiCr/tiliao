/* empty css             *//* empty css               *//* empty css                *//* empty css                  *//* empty css                   *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                *//* empty css              *//* empty css               */import{r as d}from"./request-BFhekgCV.js";/* empty css                *//* empty css                    */import{r as U,c as _,a as p,b as o,w as l,j as P,E as s,A as b,B as J,C as T,D as $,G as A,H as F,o as V,h as c,u as f,I as M,J as O,K as j,m as q,L as G,N as H,P as K}from"./index-DehrrkGI.js";const L={class:"card1"},Q={style:{display:"flex","align-items":"center"}},R={class:"card",style:{"margin-bottom":"5px"}},W={key:0,class:"card"},X={class:"dialog-footer"},fe={__name:"Department",setup(Y){const e=U({formVisible:!1,form:{},tableData:[],pageNum:1,pageSize:4,total:0,name:null,ids:[]}),i=()=>{d.get("/department/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(a=>{var t,n;a.code==="200"&&(e.tableData=((t=a.data)==null?void 0:t.list)||[],e.total=(n=a.data)==null?void 0:n.total)})},y=()=>{e.form={},e.formVisible=!0},h=a=>{e.form=JSON.parse(JSON.stringify(a)),e.formVisible=!0},C=()=>{d.post("/department/add",e.form).then(a=>{a.code==="200"?(s.success("已成功新增科室"),e.formVisible=!1,i()):s.error(a.msg)})},E=()=>{d.put("/department/update",e.form).then(a=>{a.code==="200"&&(s.success("更新已成功"),e.formVisible=!1,i())})},k=()=>{e.form.id?E():C()},w=a=>{b.confirm("此操作不可逆！","删除科室",{type:"warning"}).then(t=>{d.delete("/department/delete/"+a).then(n=>{n.code==="200"?(s.success("删除已成功"),i()):s.error(n.msg)})}).catch(t=>{console.error(t)})},x=()=>{if(!e.ids.length){s.warning("请选择要删除的数据");return}b.confirm("此操作不可逆！","删除科室",{type:"warning"}).then(a=>{d.delete("/department/delete/batch",{data:e.ids}).then(t=>{t.code==="200"?(s.success("删除已成功"),i()):s.error(t.msg)})}).catch(a=>{console.error(a)})},N=a=>{e.ids=a.map(t=>t.id)};return i(),(a,t)=>{const n=J,v=q,u=T,m=G,S=$,B=A,g=H,z=K,D=F;return V(),_("div",null,[p("div",L,[p("div",Q,[o(n,{type:"primary",plain:"",onClick:y},{default:l(()=>t[6]||(t[6]=[c("新增科室")])),_:1}),o(n,{type:"danger",plain:"",onClick:x},{default:l(()=>t[7]||(t[7]=[c("批量删除")])),_:1})]),o(u,{placeholder:"请输入科室名称查询",modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=r=>e.name=r),onInput:i,clearable:"",style:{width:"30%","margin-left":"auto"}},{prepend:l(()=>[o(v,null,{default:l(()=>[o(f(M))]),_:1})]),append:l(()=>[o(n,{icon:"el-icon-search",onClick:i})]),_:1},8,["modelValue"])]),p("div",R,[o(S,{stripe:"",data:e.tableData,onSelectionChange:N},{default:l(()=>[o(m,{type:"selection",width:"55"}),o(m,{prop:"name",label:"科室类型"}),o(m,{prop:"information",label:"科室介绍"}),o(m,{label:"修改或删除",width:"100",fixed:"right"},{default:l(r=>[o(n,{type:"primary",circle:"",icon:f(O),onClick:I=>h(r.row)},null,8,["icon","onClick"]),o(n,{type:"danger",circle:"",icon:f(j),onClick:I=>w(r.row.id)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),e.total?(V(),_("div",W,[o(B,{onCurrentChange:i,background:"",layout:"prev, pager, next","page-size":e.pageSize,"current-page":e.pageNum,"onUpdate:currentPage":t[1]||(t[1]=r=>e.pageNum=r),total:e.total},null,8,["page-size","current-page","total"])])):P("",!0),o(D,{title:"科室信息",modelValue:e.formVisible,"onUpdate:modelValue":t[5]||(t[5]=r=>e.formVisible=r),width:"40%","destroy-on-close":""},{footer:l(()=>[p("span",X,[o(n,{onClick:t[4]||(t[4]=r=>e.formVisible=!1)},{default:l(()=>t[8]||(t[8]=[c("取 消")])),_:1}),o(n,{type:"primary",onClick:k},{default:l(()=>t[9]||(t[9]=[c("确 定")])),_:1})])]),default:l(()=>[o(z,{ref:"form",model:e.form,"label-width":"70px",style:{padding:"20px"}},{default:l(()=>[o(g,{prop:"name",label:"科室"},{default:l(()=>[o(u,{modelValue:e.form.name,"onUpdate:modelValue":t[2]||(t[2]=r=>e.form.name=r),placeholder:"请输入科室名称"},null,8,["modelValue"])]),_:1}),o(g,{prop:"information",label:"科室介绍"},{default:l(()=>[o(u,{modelValue:e.form.information,"onUpdate:modelValue":t[3]||(t[3]=r=>e.form.information=r),type:"textarea",placeholder:"请输入科室介绍"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{fe as default};
