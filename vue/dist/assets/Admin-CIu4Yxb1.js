/* empty css             *//* empty css               *//* empty css                *//* empty css                  *//* empty css                 *//* empty css                   *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                *//* empty css                     *//* empty css              *//* empty css               */import{r as m}from"./request-BFhekgCV.js";/* empty css                *//* empty css                    */import{z as J,r as M,c as y,a as f,b as a,w as r,j as V,E as s,A as v,B as O,C as T,D as R,G as j,H as G,o as g,h as p,u as _,I as H,i as K,J as L,K as Z,m as Q,L as W,M as X,N as Y,O as ee,P as te}from"./index-DehrrkGI.js";const ae={class:"card1"},le={style:{display:"flex","align-items":"center"}},oe={class:"card",style:{"margin-bottom":"5px"}},re={key:0,class:"card"},ne={class:"dialog-footer"},Ee={__name:"Admin",setup(se){const h="http://192.168.88.6:8090/api",b=J(null),e=M({formVisible:!1,form:{id:null,username:"",avatar:"",name:"",contact:""},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"},{pattern:/^[a-zA-Z0-9]+$/,message:"账号只能包含英文和数字",trigger:"blur"}],contact:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^\d{11}$/,message:"联系电话必须是11位数字",trigger:"blur"}]},tableData:[],pageNum:1,pageSize:10,total:0,name:null,ids:[]}),i=()=>{m.get("/admin/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(l=>{var t,n;l.code==="200"&&(e.tableData=((t=l.data)==null?void 0:t.list)||[],e.total=(n=l.data)==null?void 0:n.total)})},w=()=>{e.form={},e.formVisible=!0},k=()=>{if(!e.ids.length){s.warning("请选择要删除的数据");return}v.confirm("此操作不可逆！","删除科室",{type:"warning"}).then(l=>{m.delete("/admin/delete/batch",{data:e.ids}).then(t=>{t.code==="200"?(s.success("删除已成功"),i()):s.error(t.msg)})}).catch(l=>{console.error(l)})},C=l=>{e.form=JSON.parse(JSON.stringify(l)),e.formVisible=!0},E=()=>{m.post("/admin/add",e.form).then(l=>{l.code==="200"?(s.success("操作成功"),e.formVisible=!1,i()):s.error(l.msg)})},x=()=>{m.put("/admin/update",e.form).then(l=>{l.code==="200"?(s.success("操作成功"),e.formVisible=!1,i()):s.error(l.msg)})},N=()=>{b.value.validate(l=>{l&&(e.form.id?x():E())})},U=l=>{v.confirm("此操作不可逆！","删除管理员信息",{type:"warning"}).then(t=>{m.delete("/admin/delete/"+l).then(n=>{n.code==="200"?(s.success("删除已成功"),i()):s.error(n.msg)})}).catch(t=>{console.error(t)})},z=l=>{e.ids=l.map(t=>t.id)},B=l=>{e.form.avatar=l.data};return i(),(l,t)=>{const n=O,S=Q,u=T,d=W,I=X,D=R,$=j,c=Y,A=ee,P=te,q=G;return g(),y("div",null,[f("div",ae,[f("div",le,[a(n,{type:"primary",plain:"",onClick:w},{default:r(()=>t[7]||(t[7]=[p("新增管理员")])),_:1}),a(n,{type:"danger",plain:"",onClick:k},{default:r(()=>t[8]||(t[8]=[p("批量删除")])),_:1})]),a(u,{placeholder:"请输入管理员姓名查询",modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=o=>e.name=o),onInput:i,clearable:"",style:{width:"30%","margin-left":"auto"}},{prepend:r(()=>[a(S,null,{default:r(()=>[a(_(H))]),_:1})]),append:r(()=>[a(n,{icon:"el-icon-search",onClick:i})]),_:1},8,["modelValue"])]),f("div",oe,[a(D,{stripe:"",data:e.tableData,onSelectionChange:z},{default:r(()=>[a(d,{type:"selection",width:"55"}),a(d,{prop:"username",label:"账号"}),a(d,{prop:"avatar",label:"头像"},{default:r(o=>[o.row.avatar?(g(),K(I,{key:0,style:{width:"40px",height:"40px","border-radius":"50%",display:"block"},src:o.row.avatar,"preview-src-list":[o.row.avatar],"preview-teleported":""},null,8,["src","preview-src-list"])):V("",!0)]),_:1}),a(d,{prop:"name",label:"姓名"}),a(d,{prop:"role",label:"身份"}),a(d,{prop:"contact",label:"联系电话"}),a(d,{label:"修改或删除",width:"100",fixed:"right"},{default:r(o=>[a(n,{type:"primary",circle:"",icon:_(L),onClick:F=>C(o.row)},null,8,["icon","onClick"]),a(n,{type:"danger",circle:"",icon:_(Z),onClick:F=>U(o.row.id)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),e.total?(g(),y("div",re,[a($,{onCurrentChange:i,background:"",layout:"prev, pager, next","page-size":e.pageSize,"current-page":e.pageNum,"onUpdate:currentPage":t[1]||(t[1]=o=>e.pageNum=o),total:e.total},null,8,["page-size","current-page","total"])])):V("",!0),a(q,{title:"管理员信息",modelValue:e.formVisible,"onUpdate:modelValue":t[6]||(t[6]=o=>e.formVisible=o),width:"40%","destroy-on-close":""},{footer:r(()=>[f("span",ne,[a(n,{onClick:t[5]||(t[5]=o=>e.formVisible=!1)},{default:r(()=>t[10]||(t[10]=[p("取 消")])),_:1}),a(n,{type:"primary",onClick:N},{default:r(()=>t[11]||(t[11]=[p("确 定")])),_:1})])]),default:r(()=>[a(P,{ref_key:"formRef",ref:b,model:e.form,rules:e.rules,"label-width":"70px",style:{padding:"20px"}},{default:r(()=>[a(c,{prop:"username",label:"账号"},{default:r(()=>[a(u,{modelValue:e.form.username,"onUpdate:modelValue":t[2]||(t[2]=o=>e.form.username=o),placeholder:"请输入账号"},null,8,["modelValue"])]),_:1}),a(c,{prop:"avatar",label:"头像"},{default:r(()=>[a(A,{action:h+"/files/upload","on-success":B,"list-type":"picture"},{default:r(()=>[a(n,{type:"primary"},{default:r(()=>t[9]||(t[9]=[p("点击上传")])),_:1})]),_:1},8,["action"])]),_:1}),a(c,{prop:"name",label:"姓名"},{default:r(()=>[a(u,{modelValue:e.form.name,"onUpdate:modelValue":t[3]||(t[3]=o=>e.form.name=o),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),a(c,{prop:"contact",label:"电话"},{default:r(()=>[a(u,{modelValue:e.form.contact,"onUpdate:modelValue":t[4]||(t[4]=o=>e.form.contact=o),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}};export{Ee as default};
