/* empty css             *//* empty css               *//* empty css                *//* empty css                  *//* empty css               *//* empty css                  *//* empty css                 *//* empty css                   *//* empty css                     *//* empty css                *//* empty css                     *//* empty css              *//* empty css               */import{r as m}from"./request-BFhekgCV.js";/* empty css                *//* empty css                    */import{z as T,r as j,c as _,a as b,b as l,w as r,j as k,E as s,A as h,B as G,C as H,D as K,G as Z,H as Q,o as u,h as f,u as y,I as W,i as v,J as X,K as Y,F as E,x as C,m as ee,L as te,M as le,N as ae,O as oe,R as re,S as ne,P as de}from"./index-DehrrkGI.js";const se={class:"card1"},ie={style:{display:"flex","align-items":"center"}},pe={class:"card",style:{"margin-bottom":"5px"}},me={key:0,class:"card"},ue={class:"dialog-footer"},ze={__name:"Doctor",setup(ce){const x="http://192.168.88.6:8090/api",w=T(null),e=j({formVisible:!1,form:{id:null,username:"",avatar:"",name:"",gender:"男",contact:"",departmentId:null,titleId:null,description:""},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"},{pattern:/^[a-zA-Z0-9]+$/,message:"账号只能包含英文和数字",trigger:"blur"}],contact:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^\d{11}$/,message:"联系电话必须是11位数字",trigger:"blur"}]},tableData:[],pageNum:1,pageSize:10,total:0,name:null,ids:[],departmentList:[],titleList:[]});m.get("/department/selectAll").then(o=>{e.departmentList=o.data}),m.get("/title/selectAll").then(o=>{e.titleList=o.data});const i=()=>{m.get("/doctor/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(o=>{var t,n;o.code==="200"&&(e.tableData=((t=o.data)==null?void 0:t.list)||[],e.total=(n=o.data)==null?void 0:n.total)})},N=()=>{e.form={},e.formVisible=!0},U=()=>{if(!e.ids.length){s.warning("请选择要删除的数据");return}h.confirm("此操作不可逆！","删除科室",{type:"warning"}).then(o=>{m.delete("/doctor/delete/batch",{data:e.ids}).then(t=>{t.code==="200"?(s.success("删除已成功"),i()):s.error(t.msg)})}).catch(o=>{console.error(o)})},I=o=>{e.form=JSON.parse(JSON.stringify(o)),e.formVisible=!0},S=()=>{m.post("/doctor/add",e.form).then(o=>{o.code==="200"?(s.success("已成功新增医生"),e.formVisible=!1,i()):s.error(o.msg)})},z=()=>{m.put("/doctor/update",e.form).then(o=>{o.code==="200"?(s.success("更新已成功"),e.formVisible=!1,i()):s.error(o.msg)})},B=()=>{w.value.validate(o=>{o&&(e.form.id?z():S())})},L=o=>{h.confirm("此操作不可逆！","删除医生信息",{type:"warning"}).then(t=>{m.delete("/doctor/delete/"+o).then(n=>{n.code==="200"?(s.success("删除已成功"),i()):s.error(n.msg)})}).catch(t=>{console.error(t)})},D=o=>{e.ids=o.map(t=>t.id)},A=o=>{e.form.avatar=o.data};return i(),(o,t)=>{const n=G,F=ee,c=H,d=te,$=le,O=K,P=Z,p=ae,q=oe,g=re,V=ne,J=de,M=Q;return u(),_("div",null,[b("div",se,[b("div",ie,[l(n,{type:"primary",plain:"",onClick:N},{default:r(()=>t[11]||(t[11]=[f("新增医生")])),_:1}),l(n,{type:"danger",plain:"",onClick:U},{default:r(()=>t[12]||(t[12]=[f("批量删除")])),_:1})]),l(c,{placeholder:"请输入医生姓名查询",modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.name=a),onInput:i,clearable:"",style:{width:"30%","margin-left":"auto"}},{prepend:r(()=>[l(F,null,{default:r(()=>[l(y(W))]),_:1})]),append:r(()=>[l(n,{icon:"el-icon-search",onClick:i})]),_:1},8,["modelValue"])]),b("div",pe,[l(O,{"tooltip-effect":"dark",stripe:"",data:e.tableData,onSelectionChange:D},{default:r(()=>[l(d,{type:"selection",width:"55"}),l(d,{prop:"username",label:"账号"}),l(d,{prop:"avatar",label:"头像"},{default:r(a=>[a.row.avatar?(u(),v($,{key:0,style:{width:"40px",height:"40px","border-radius":"50%",display:"block"},src:a.row.avatar,"preview-src-list":[a.row.avatar],"preview-teleported":""},null,8,["src","preview-src-list"])):k("",!0)]),_:1}),l(d,{prop:"name",label:"姓名"}),l(d,{prop:"gender",label:"性别"}),l(d,{prop:"departmentName",label:"科室"}),l(d,{prop:"titleName",label:"职称"}),l(d,{prop:"contact",label:"联系电话"}),l(d,{prop:"description",label:"个人背景","show-overflow-tooltip":""}),l(d,{label:"修改或删除",width:"100",fixed:"right"},{default:r(a=>[l(n,{type:"primary",circle:"",icon:y(X),onClick:R=>I(a.row)},null,8,["icon","onClick"]),l(n,{type:"danger",circle:"",icon:y(Y),onClick:R=>L(a.row.id)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),e.total?(u(),_("div",me,[l(P,{onCurrentChange:i,background:"",layout:"prev, pager, next","page-size":e.pageSize,"current-page":e.pageNum,"onUpdate:currentPage":t[1]||(t[1]=a=>e.pageNum=a),total:e.total},null,8,["page-size","current-page","total"])])):k("",!0),l(M,{title:"医生信息",modelValue:e.formVisible,"onUpdate:modelValue":t[10]||(t[10]=a=>e.formVisible=a),width:"40%","destroy-on-close":""},{footer:r(()=>[b("span",ue,[l(n,{onClick:t[9]||(t[9]=a=>e.formVisible=!1)},{default:r(()=>t[14]||(t[14]=[f("取 消")])),_:1}),l(n,{type:"primary",onClick:B},{default:r(()=>t[15]||(t[15]=[f("确 定")])),_:1})])]),default:r(()=>[l(J,{ref_key:"formRef",ref:w,model:e.form,rules:e.rules,"label-width":"70px",style:{padding:"20px"}},{default:r(()=>[l(p,{prop:"username",label:"账号"},{default:r(()=>[l(c,{modelValue:e.form.username,"onUpdate:modelValue":t[2]||(t[2]=a=>e.form.username=a),placeholder:"请输入账号"},null,8,["modelValue"])]),_:1}),l(p,{prop:"avatar",label:"头像"},{default:r(()=>[l(q,{action:x+"/files/upload","on-success":A,"list-type":"picture"},{default:r(()=>[l(n,{type:"primary"},{default:r(()=>t[13]||(t[13]=[f("点击上传")])),_:1})]),_:1},8,["action"])]),_:1}),l(p,{prop:"name",label:"姓名"},{default:r(()=>[l(c,{modelValue:e.form.name,"onUpdate:modelValue":t[3]||(t[3]=a=>e.form.name=a),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),l(p,{prop:"gender",label:"性别"},{default:r(()=>[l(V,{modelValue:e.form.gender,"onUpdate:modelValue":t[4]||(t[4]=a=>e.form.gender=a),placeholder:"请选择性别"},{default:r(()=>[l(g,{label:"男",value:"男"}),l(g,{label:"女",value:"女"})]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"科室"},{default:r(()=>[l(V,{style:{width:"100%"},modelValue:e.form.departmentId,"onUpdate:modelValue":t[5]||(t[5]=a=>e.form.departmentId=a)},{default:r(()=>[(u(!0),_(E,null,C(e.departmentList,a=>(u(),v(g,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"职称"},{default:r(()=>[l(V,{style:{width:"100%"},modelValue:e.form.titleId,"onUpdate:modelValue":t[6]||(t[6]=a=>e.form.titleId=a)},{default:r(()=>[(u(!0),_(E,null,C(e.titleList,a=>(u(),v(g,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,{prop:"contact",label:"电话"},{default:r(()=>[l(c,{modelValue:e.form.contact,"onUpdate:modelValue":t[7]||(t[7]=a=>e.form.contact=a),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),l(p,{prop:"description",label:"个人背景"},{default:r(()=>[l(c,{modelValue:e.form.description,"onUpdate:modelValue":t[8]||(t[8]=a=>e.form.description=a),type:"textarea",placeholder:"请输入个人背景"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}};export{ze as default};
