/* empty css             *//* empty css                  *//* empty css               *//* empty css              */import{r as c}from"./request-BFhekgCV.js";/* empty css                */import{z as _,r as g,c as P,b as o,w as a,P as V,o as x,a as E,h as b,E as n,d as h,C as v,N as y,B}from"./index-DehrrkGI.js";const C={style:{width:"50%",margin:"20px auto",background:"linear-gradient(to bottom right, white, #CCE2FD)"},class:"card"},N={style:{"text-align":"center"}},D={__name:"Password",setup(I){const u=_(),m=(l,e,s)=>{e?(e!==r.user.newPassword&&s(new Error("确认密码跟原密码不一致!")),s()):s(new Error("请确认密码"))},r=g({user:JSON.parse(localStorage.getItem("xm-user")||"{}"),rules:{password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"}],confirmPassword:[{validator:m,trigger:"blur"}]}}),p=()=>{u.value.validate(l=>{l&&c.put("/updatePassword",r.user).then(e=>{e.code==="200"?(n.success("保存成功"),i()):n.error(e.msg)})})},i=()=>{localStorage.removeItem("xm-user"),h.push("/login")};return(l,e)=>{const s=v,d=y,w=B,f=V;return x(),P("div",C,[o(f,{ref_key:"formRef",ref:u,rules:r.rules,model:r.user,"label-width":"80px",style:{padding:"20px"}},{default:a(()=>[o(d,{label:"原密码",prop:"password"},{default:a(()=>[o(s,{modelValue:r.user.password,"onUpdate:modelValue":e[0]||(e[0]=t=>r.user.password=t),placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),o(d,{label:"新密码",prop:"newPassword"},{default:a(()=>[o(s,{modelValue:r.user.newPassword,"onUpdate:modelValue":e[1]||(e[1]=t=>r.user.newPassword=t),placeholder:"请输入新密码","show-password":""},null,8,["modelValue"])]),_:1}),o(d,{label:"确认密码",prop:"confirmPassword"},{default:a(()=>[o(s,{modelValue:r.user.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=t=>r.user.confirmPassword=t),placeholder:"请确认新密码","show-password":""},null,8,["modelValue"])]),_:1}),E("div",N,[o(w,{type:"primary",onClick:p},{default:a(()=>e[3]||(e[3]=[b("保 存")])),_:1})])]),_:1},8,["rules","model"])])}}};export{D as default};
