/* empty css             *//* empty css                   *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                *//* empty css                          *//* empty css            *//* empty css              *//* empty css               */import{r as N}from"./request-BFhekgCV.js";/* empty css                *//* empty css                    *//* empty css                */import{r as B,c as y,b as o,w as t,a as b,j as i,a4 as O,D as T,G as h,o as n,u as $,I as J,h as l,t as s,i as p,A as M,E as x,m as P,B as A,C as U,a5 as j,$ as q,a0 as G,L,a1 as R}from"./index-DehrrkGI.js";const F={class:"card-container",style:{width:"80%","margin-bottom":"5px"}},H={style:{padding:"10px"}},K={key:0},Q={key:1},W={key:0,class:"pagination-container"},_e={__name:"ExaminationOrder",setup(X){const r=B({user:JSON.parse(localStorage.getItem("xm-user")||"{}"),formVisible:!1,form:{},tableData:[],pageNum:1,pageSize:10,total:0,orderId:null,ids:[]}),w=()=>{N.get("/examinationOrder/selectPage",{params:{pageNum:r.pageNum,pageSize:r.pageSize,orderId:r.orderId}}).then(d=>{var a,g;d.code==="200"&&(r.tableData=((a=d.data)==null?void 0:a.list)||[],r.total=(g=d.data)==null?void 0:g.total)})},C=d=>{window.open(d)},c=(d,a)=>{r.form=JSON.parse(JSON.stringify(d)),r.form.status=a,M.confirm("您确认操作吗？","确认",{type:"warning"}).then(g=>{N.put("/examinationOrder/update",r.form).then(_=>{_.code==="200"?(x.success("操作成功"),w()):x.error(_.msg)})}).catch()},E=d=>{r.ids=d.map(a=>a.id)};return w(),(d,a)=>{const g=P,_=A,I=U,v=j,S=O,u=q,D=G,m=L,f=R,z=T,V=h;return n(),y("div",null,[o(S,{gutter:10,style:{"margin-top":"5px","margin-bottom":"20px","text-align":"center"}},{default:t(()=>[o(v,{span:24},{default:t(()=>[o(I,{placeholder:"请输入订单编号查询",modelValue:r.orderId,"onUpdate:modelValue":a[0]||(a[0]=e=>r.orderId=e),onInput:w,clearable:"",style:{width:"80%",margin:"0 auto"}},{prepend:t(()=>[o(g,null,{default:t(()=>[o($(J))]),_:1})]),append:t(()=>[o(_,{icon:"el-icon-search",onClick:d.searchDoctors},null,8,["onClick"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),b("div",F,[o(z,{stripe:"",data:r.tableData,onSelectionChange:E},{default:t(()=>[o(m,{label:"详情",width:"60px",type:"expand"},{default:t(e=>[b("div",H,[o(D,{title:"订单详细信息",border:""},{default:t(()=>[o(u,{label:"订单号"},{default:t(()=>[l(s(e.row.orderId),1)]),_:2},1024),o(u,{label:"用户"},{default:t(()=>[l(s(e.row.userName),1)]),_:2},1024),o(u,{label:"医生"},{default:t(()=>[l(s(e.row.doctorName),1)]),_:2},1024),o(u,{label:"预约日期"},{default:t(()=>[l(s(e.row.reserveDate),1)]),_:2},1024),o(u,{label:"预约时间"},{default:t(()=>[l(s(e.row.time),1)]),_:2},1024),o(u,{label:"建议"},{default:t(()=>[l(s(e.row.comment),1)]),_:2},1024),o(u,{label:"费用"},{default:t(()=>[l(s(e.row.money)+" 元",1)]),_:2},1024),o(u,{label:"订单状态"},{default:t(()=>[l(s(e.row.status),1)]),_:2},1024),o(u,{label:"创建时间"},{default:t(()=>[l(s(e.row.createTime),1)]),_:2},1024),o(u,{label:"检查时间"},{default:t(()=>[l(s(e.row.checkTime),1)]),_:2},1024),o(u,{label:"反馈"},{default:t(()=>[l(s(e.row.feedback),1)]),_:2},1024)]),_:2},1024)])]),_:1}),r.user.role==="ADMIN"?(n(),p(m,{key:0,type:"selection",width:"55"})):i("",!0),o(m,{prop:"orderId",label:"订单号",width:"200px"}),o(m,{prop:"userName",label:"用户"}),o(m,{prop:"doctorName",label:"医生"},{default:t(e=>[e.row.doctorName?(n(),y("span",K,s(e.row.doctorName),1)):(n(),y("span",Q,"-"))]),_:1}),o(m,{prop:"reserveDate",label:"预约日期"}),o(m,{prop:"file",label:"检查结果"},{default:t(e=>[e.row.file?(n(),p(_,{key:0,type:"primary",plain:"",onClick:k=>C(e.row.file)},{default:t(()=>a[2]||(a[2]=[l("下载")])),_:2},1032,["onClick"])):i("",!0)]),_:1}),o(m,{prop:"money",label:"费用"}),o(m,{prop:"status",label:"订单状态"},{default:t(e=>[e.row.status==="已取消"?(n(),p(f,{key:0,type:"danger"},{default:t(()=>a[3]||(a[3]=[l("已取消")])),_:1})):i("",!0),e.row.status==="待审批"?(n(),p(f,{key:1,type:"primary"},{default:t(()=>a[4]||(a[4]=[l("待审批")])),_:1})):i("",!0),e.row.status==="审批拒绝"?(n(),p(f,{key:2,type:"danger"},{default:t(()=>a[5]||(a[5]=[l("审批拒绝")])),_:1})):i("",!0),e.row.status==="待支付"?(n(),p(f,{key:3,type:"info"},{default:t(()=>a[6]||(a[6]=[l("待支付")])),_:1})):i("",!0),e.row.status==="待检查"?(n(),p(f,{key:4,type:"primary"},{default:t(()=>a[7]||(a[7]=[l("待检查")])),_:1})):i("",!0),e.row.status==="待上传报告"?(n(),p(f,{key:5,type:"info"},{default:t(()=>a[8]||(a[8]=[l("待上传报告")])),_:1})):i("",!0),e.row.status==="已完成"?(n(),p(f,{key:6,type:"success"},{default:t(()=>a[9]||(a[9]=[l("已完成")])),_:1})):i("",!0)]),_:1}),o(m,{label:"操作",width:"100",fixed:"right"},{default:t(e=>[b("div",null,[e.row.status==="待审批"?(n(),p(_,{key:0,type:"danger",size:"small",onClick:k=>c(e.row,"已取消")},{default:t(()=>a[10]||(a[10]=[l("取消")])),_:2},1032,["onClick"])):i("",!0),e.row.status==="待支付"?(n(),p(_,{key:1,type:"info",size:"small",onClick:k=>c(e.row,"待检查")},{default:t(()=>a[11]||(a[11]=[l("支付")])),_:2},1032,["onClick"])):i("",!0)])]),_:1})]),_:1},8,["data"])]),r.total?(n(),y("div",W,[o(V,{onCurrentChange:w,background:"",layout:"prev, pager, next","page-size":r.pageSize,"current-page":r.pageNum,"onUpdate:currentPage":a[1]||(a[1]=e=>r.pageNum=e),total:r.total},null,8,["page-size","current-page","total"])])):i("",!0)])}}};export{_e as default};
